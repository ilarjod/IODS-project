demo(graphics)
demo(image)
x=1
x
1+1
y=3+x
y=x^2
y
z=3+x
y+z
y+z=0
A<-matrix(c(1,-1,2,3),2,2)
A
A<-matrix(c(1,11,2,3),2,2)
A
A<-matrix(c(1,11,2,3),1,4)
A
A<-matrix(c(1,11,2,3),4,1)
A
A<-matrix(c(1,-1,2,3),2,2)
A+B
B<-matrix(c(3,6,2,3),2,2)
B<-matrix(c(3,6,2,3),2,2)
B
A+B
A<-matrix(c(2,3,4,5,7,9),3,2)
A
t(A)
Z<-t(A)
Z
tr(A)
trace(A)
sum(diag(A))
F<-matrix(c(1,2,3,4)2,2)
F<-matrix(c(1,2,3,4),2,2)
F
F<-matrix(c(1,3,2,4),2,2)
F
det(F)
A<-(c(2,8,4,1,3,4),2,3)
A<-(c(2,8,4,1,3,4),2,3)
A<-(c(2,8,4,1,3,4),2,3)
A<-(c(2,8,4,1,3,4)2,3)
A<-matrix(c(2,8,4,1,3,4),2,3)
A
B<-matrix(c(3,1,8,4,2,3),3,2)
B
A%*%B
C<-matrix(c(5,6,1,7,2,5),2,3)
C
A%*%C
B%*%C
D<-matrix(c(5,6,2,1,7,8,2,5,1),3,3)
D
sum(diag(D))
tr(D)
B%*%A
sum(diag(B%*%A))
sum(diag(A%*%B))
det(A)
det(D)
88+8
t(D)
det(t(D))
B
B<-matrix(c(3,4,2,3),2,2)
B
C
B<-matrix(c(5,6,2,1,7,8,2,5,1),3,3)
C<-matrix(c(5,6,2,1,7,8,2,5,1),3,3)
C
B<-matrix(c(3,4,2,3),2,2)
B%x%C
K<-B%x%C
K
det(K)
(det(B))^3*(det(C))^2
det(10A)
det(10%*%A)
det(10*A)
A
10*C
det(10*C)
999+1
source('~/.active-rstudio-document')
View(A)
View(B)
View(D)
C<-matrix(c(5,6,2,1,7,8,2,5,1),3,3, byrow=true)
C<-matrix(5,6,2,1,7,8,2,5,1) byrow=true)
C<-matrix(5,6,2,1,7,8,2,5,1) byrow=TRUE)
C<-matrix(5,6,2,1,7,8,2,5,1, byrow=TRUE)
C<-matrix(5,6,2,1,7,8,2,5,1, byrow=TRUE, NROW=3)
C<-matrix(5,6,2,1,7,8,2,5,1, byrow=TRUE, nrow=3)
matrix(1:9, byrow = TRUE, nrow = 3)
matrix(1:8, byrow = TRUE, nrow = 3)
matrix(2,3,4,5,1,7,8,9, byrow = TRUE, nrow = 3)
matrix(2,3,4,5,1,7,8,9,6 byrow = TRUE, nrow = 3)
matrix(2,3,4,5,1,7,8,9,6, byrow = TRUE, nrow = 3)
matrix(c(2,3,4,5,1,7,8,9,6), byrow = TRUE, nrow = 3)
?one_of
library(dplyr)
??one_of
source('~/.active-rstudio-document', echo=TRUE)
install.packages("dplyr")
source('~/.active-rstudio-document', echo=TRUE)
getwd()
setwd('github')
setwd('ODS-project')
setwd('IODS-project')
setwd('data')
setwd('data')
dir()
alc <- read.table(alc.txt)
alc <- read.table("alc.txt")
View(alc)
colnames[1]
colnames(alc)[1]
colnames(alc)[1, ]
colnames(alc)[ , 1]
colnames(alc)[2, 1]
colnames(alc)
View(alc)
g1 <- ggplot(alc, aes(x = high_use, y = G3, col = sex))
g1
library(ggplot2)
library("GGally", lib.loc="~/R/win-library/3.2")
g1 <- ggplot(alc, aes(x = high_use, y = G3, col = sex))
g1
g1 + geom_boxplot() + ylab("grade")
g1 + geom_boxplot() + ylab("grade") + xlab("high use of alcohol")
g2 <- ggplot(alc, aes(x = high_use, y = absences, col = sex))
g2 + geom_boxplot() + ggtitle("Student absences by alcohol consumption and sex")
g2 <- ggplot(alc, aes(x = high_use, y = address, col = sex))
g2 + geom_boxplot() + ggtitle("Student absences by alcohol consumption and sex")
g2 <- ggplot(alc, aes(x = high_use, y = famsize, col = sex))
g2 + geom_boxplot() + ggtitle("Student absences by alcohol consumption and sex")
columns(alc)
col(alc)
colnames(alc)
g2 <- ggplot(alc, aes(x = high_use, y = age, col = sex))
g2 + geom_boxplot() + ggtitle("Student absences by alcohol consumption and sex")
alc
View(alc)
glimpse(alc)
library("dplyr", lib.loc="~/R/win-library/3.2")
glimpse(alc)
colnames(alc)
gather(alc) %>% glimpse
library("tidyverse", lib.loc="~/R/win-library/3.2")
gather(alc) %>% glimpse
gather(alc) %>% ggplot(aes(value)) + facet_wrap("key", scales = "free") + geom_bar()
g2 <- ggplot(alc, aes(x = high_use, y = age, col = sex))
g2
g2 <- ggplot(alc, aes(x = high_use, y = age, col = sex))
g2 + geom_bar()
g2 <- ggplot(alc, aes(x = high_use, col = sex))
g2 + geom_bar()
g2 <- ggplot(alc, aes(x = age, col = sex))
g2 + geom_bar()
g2 <- ggplot(alc, aes(x = age, col = sex))
g2 + geom_bar(fill=TRUE)
g2 <- ggplot(alc, aes(x = age, col = sex))
g2 + geom_bar(fill=sex)
g2 <- ggplot(alc, aes(x = age, col = sex))
g2 + geom_bar(fill=blue)
g2 <- ggplot(alc, aes(x = age, col = sex))
g2 + geom_bar(fill="blue")
g2 <- ggplot(alc, aes(x = Medu, col = sex))
g2 + geom_bar()
g2 <- ggplot(alc, aes(x = Medu, col = sex))
g2 + geom_histogram()
g2 <- ggplot(alc, aes(x = Medu, col = sex))
g2 + geom_dotplot()
g2 <- ggplot(alc, aes(x = Medu, col = sex))
g2 + geom_dotplot(fill="white")
g2 <- ggplot(alc, aes(x = Medu, col = sex))
g2 + geom_barplot(fill="white")
g2 <- ggplot(alc, aes(x = Medu, col = sex))
g2 + geom_bar(fill="white")
g2 <- ggplot(alc, aes(x = Medu, col = sex))
g2 + geom_bar(fill=sex)
g2 <- ggplot(alc, aes(x = Medu, col = sex))
g2 + geom_bar(col=sex)
g2 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex))
g2 + geom_bar()
g2 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex)) + geom_bar()
g2
g3 <- ggplot(alc, aes(x = Pstatus, col = sex, fill = sex)) + geom_bar()
g3
g4 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex)) + geom_bar()
g4
g4 <- ggplot(alc, aes(x = address, col = sex, fill = sex)) + geom_bar()
g4
table(high_use = alc$high_use, prediction = alc$address)
table(high_use = alc$high_use, address = alc$address) %>% addmargins()
gather(alc) %>% ggplot(aes(value)) + facet_wrap("key", scales = "free") + geom_bar()
table(high_use = alc$high_use, address = alc$Pstatus) %>% addmargins()
table(high_use = alc$high_use, address = alc$Pstatus) %>% addmargins()
g3 <- ggplot(alc, aes(x = Pstatus, col = sex, fill = sex)) + geom_boxplot()
g3
gx <- ggplot(alc, aes(x = high_use, y = Pstatus, col = sex)) + geom_boxplot()
gx
gx <- ggplot(alc, aes(x = high_use, y = Pstatus, col = sex)) + geom_point()
gx
table(high_use = alc$high_use, address = alc$address) %>% addmargins()
table(high_use = alc$high_use, address = alc$Pstatus) %>% addmargins()
table(high_use = alc$high_use, address = alc$address) %>% addmargins()
table(high_use = alc$high_use, address = alc$address) %>% addmargins()
(high_use = alc$high_use, address = alc$address)  %>% prop.table() %>% addmargins()
table(high_use = alc$high_use, address = alc$address)   %>% addmargins()
table(high_use = alc$high_use, address = alc$address)   %>% addmargins()  %>% prop.table()
table(high_use = alc$high_use, address = alc$Pstatus) %>% prop.table() %>% addmargins()
table(high_use = alc$high_use, address = alc$famsize) %>% addmargins()
table(high_use = alc$high_use, parents_living_together = alc$Pstatus) %>% prop.table() %>% addmargins()
table(high_use = alc$high_use, mothers_education_level = alc$Medu) %>% addmargins()  %>% prop.table()
m <- glm(high_use ~ Pstatus + Medu + address + familysize, data = alc, family = "binomial")
summary(m)
m <- glm(high_use ~ Pstatus + Medu + address + famsize, data = alc, family = "binomial")
summary(m)
coef(m)
table(high_use = alc$high_use, address = alc$famsize) %>% addmargins() %>% prop.table()
table(high_use = alc$high_use, address = alc$address)   %>% addmargins()  %>% prop.table()
table(high_use = alc$high_use, address = alc$address) %>% prop.table() %>% addmargins()
urbanmodel <- glm(high_use ~ address, data = alc, family = "binomial")
OR <- coef(m) %>% exp
urbanmodel <- glm(high_use ~ address, data = alc, family = "binomial")
OR <- coef(m) %>% exp
CI <- exp(confint(m))
cbind(OR, CI)
urbanmodel <- glm(high_use ~ address, data = alc, family = "binomial")
OR <- coef(urbanmodel) %>% exp
CI <- exp(confint(urbanmodel))
cbind(OR, CI)
detach("package:readr", unload=TRUE)
detach("package:purrr", unload=TRUE)
detach("package:tibble", unload=TRUE)
detach("package:tidyr", unload=TRUE)
detach("package:tidyverse", unload=TRUE)
detach("package:ggplot2", unload=TRUE)
detach("package:GGally", unload=TRUE)
detach("package:dplyr", unload=TRUE)
library("tidyverse")
## Examing the variables
```
g2 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex)) + geom_bar()
g2
g3 <- ggplot(alc, aes(x = Pstatus, col = sex, fill = sex)) + geom_bar()
g3
g4 <- ggplot(alc, aes(x = address, col = sex, fill = sex)) + geom_bar()
g4
g4 <- ggplot(alc, aes(x = famsize, col = sex, fill = sex)) + geom_bar()
g4
```
Nice plots
```
table(high_use = alc$high_use, address = alc$address) %>% prop.table() %>% addmargins()
table(high_use = alc$high_use, parents_living_together = alc$Pstatus) %>% prop.table() %>% addmargins()
table(high_use = alc$high_use, mothers_education_level = alc$Medu) %>% addmargins()  %>% prop.table()
table(high_use = alc$high_use, familysize = alc$famsize) %>% addmargins() %>% prop.table()
```
Sweet tables
## Fitting a logistic model
```
m <- glm(high_use ~ Pstatus + Medu + address + famsize, data = alc, family = "binomial")
summary(m)
coef(m)
```
Looks like living in urban areas makes kids drink more heavily. Other variables seem not very significant.
## Predicting
```
urbanmodel <- glm(high_use ~ address, data = alc, family = "binomial")
OR <- coef(urbanmodel) %>% exp
CI <- exp(confint(urbanmodel))
cbind(OR, CI)
```
## Conclusion
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# To use for fills, add
scale_fill_manual(values=cbPalette)
g2 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex, scale_fill_manual(values=cbPalette))) + geom_bar()
g2
cbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# To use for fills, add
g2 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex, scale_fill_manual(values=cbPalette))) + geom_bar()
g2
g2 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex)) + geom_bar(scale_fill_manual(values=cbPalette))
cbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# To use for fills, add
g2 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex)) + geom_bar(scale_fill_manual(values=cbPalette))
2 <- ggplot(alc, aes(x = Medu, col = black, fill = sex)) + geom_bar()
g3 <- ggplot(alc, aes(x = Pstatus, col = sex, fill = sex)) + geom_bar()
g3
g2 <- ggplot(alc, aes(x = Medu, col = "black", fill = sex)) + geom_bar()
g2
g2 <- ggplot(alc, aes(x = Medu, col = sex, fill = sex)) + geom_bar()
g2
g3 <- ggplot(alc, aes(x = Pstatus, col = sex, fill = sex)) + geom_bar()
g3
g4 <- ggplot(alc, aes(x = address, col = sex, fill = sex)) + geom_bar()
g4
g2 <- ggplot(alc, aes(x = Medu, col = "black", fill = sex)) + geom_bar()
g2
g2 <- ggplot(alc, aes(x = Medu, col = "black", fill = sex)) + geom_bar()
g2
